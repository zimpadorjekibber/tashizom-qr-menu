<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Tashizom</title>
    <link rel="stylesheet" href="style.css?v=4">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>

<body>

    <!-- HERO SECTION -->
    <header class="hero">
        <!-- Background Slideshow -->
        <div class="hero-bg active" style="background-image: url('assets/summer.jpg');" id="hero-1"></div>
        <div class="hero-bg" style="background-image: url('assets/winter.jpg');" id="hero-2"></div>

        <div class="hero-content">
            <img src="assets/tashizom_logo.png" alt="Logo"
                style="width: 80px; height: 80px; background: white; padding: 5px; border-radius: 50%; margin-bottom: 20px; box-shadow: 0 5px 15px rgba(0,0,0,0.2);">
            <h1>Tashizom</h1>
            <p>Where Tradition Meets Taste</p>
            <div style="display: flex; gap: 10px; justify-content: center;">
                <button class="btn btn-primary" onclick="scrollToMenu()"><i class="fa-solid fa-utensils"></i> Order
                    Now</button>
                <button class="btn btn-secondary"
                    style="background: rgba(255,255,255,0.2); color: white; border: 1px solid rgba(255,255,255,0.5); backdrop-filter: blur(5px);"><i
                        class="fa-solid fa-info-circle"></i> Info</button>
            </div>
        </div>
    </header>

    <!-- MAIN CONTENT -->
    <main class="container" style="margin-top: -60px; position: relative; z-index: 20;">

        <!-- Search Bar (Floating) -->
        <div
            style="background: white; padding: 15px; border-radius: 16px; box-shadow: 0 10px 30px rgba(0,0,0,0.08); display: flex; align-items: center; gap: 15px; margin-bottom: 25px;">
            <i class="fa-solid fa-search" style="color: #bbb; margin-left: 10px; font-size: 1.2rem;"></i>
            <input type="text" id="search-input" placeholder="Search for momos, thukpa..."
                style="border: none; padding: 0; font-size: 1.1rem; width: 100%; outline: none; background: transparent;">
        </div>

        <!-- Categories -->
        <div class="category-sticky">
            <nav class="category-nav" id="category-wrapper">
                <!-- Injected via JS -->
                <button class="cat-chip active" data-cat="all">All</button>
            </nav>
        </div>

        <!-- Menu Grid -->
        <div id="menu-loading" style="text-align: center; padding: 60px; color: #999;">
            <i class="fa-solid fa-circle-notch fa-spin fa-2x"
                style="margin-bottom:15px; color: var(--primary);"></i><br>Preparing Menu...
        </div>

        <div class="menu-grid" id="menu-grid">
            <!-- Items Injected Here -->
        </div>

    </main>

    <!-- FLOATING CART BAR -->
    <div class="cart-bar" id="cart-bar" onclick="openCartModal()">
        <div style="display: flex; align-items: center; gap: 15px;">
            <div class="cart-count-badge">
                <span id="cart-count">0</span>
            </div>
            <div class="cart-info" style="font-weight: 500;">View Your Order</div>
        </div>
        <div class="cart-total">₹<span id="cart-total">0</span> <i class="fa-solid fa-chevron-right"
                style="margin-left: 5px; font-size: 0.8rem;"></i></div>
    </div>

    <!-- ITEM DETAIL MODAL -->
    <div class="modal-overlay" id="item-modal">
        <div class="modal-content">
            <button onclick="closeModal('item-modal')"
                style="position: absolute; top: 15px; right: 15px; border: none; background: none; font-size: 1.2rem; cursor: pointer; color: #999;"><i
                    class="fa-solid fa-times"></i></button>

            <img id="modal-img" src=""
                style="width: 100%; height: 200px; object-fit: cover; border-radius: 12px; margin-bottom: 15px;">

            <h2 id="modal-title" style="margin: 0 0 5px 0;">Product Name</h2>
            <div style="color: var(--primary); font-weight: 700; font-size: 1.2rem; margin-bottom: 10px;">₹<span
                    id="modal-price">0</span></div>
            <p id="modal-desc" style="color: #666; line-height: 1.5; margin-bottom: 20px;">Description goes here.</p>

            <div
                style="display: flex; align-items: center; justify-content: space-between; background: #f8f9fa; padding: 10px; border-radius: 12px; margin-bottom: 20px;">
                <button class="btn-icon btn-secondary" onclick="adjQty(-1)"><i class="fa-solid fa-minus"></i></button>
                <span id="modal-qty"
                    style="font-weight: 700; font-size: 1.2rem; width: 30px; text-align: center;">1</span>
                <button class="btn-icon btn-secondary" onclick="adjQty(1)"><i class="fa-solid fa-plus"></i></button>
            </div>

            <button class="btn btn-primary" style="width: 100%;" onclick="addToCart()">Add to Order</button>
        </div>
    </div>

    <!-- CART MODAL -->
    <div class="modal-overlay" id="cart-modal">
        <div class="modal-content" style="max-height: 80vh; display: flex; flex-direction: column;">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                <h2 style="margin:0;">Your Order</h2>
                <button onclick="closeModal('cart-modal')" style="border: none; background: none;"><i
                        class="fa-solid fa-times"></i></button>
            </div>

            <div id="cart-items" style="flex: 1; overflow-y: auto; margin-bottom: 15px;">
                <!-- Cart Lists -->
                <p style="text-align: center; color: #999;">Cart is empty</p>
            </div>

            <!-- Customer Info -->
            <div style="background: #f8f9fa; padding: 15px; border-radius: 12px; margin-bottom: 15px;">
                <input id="cust-name" placeholder="Your Name" style="margin-bottom: 10px;">
                <input id="cust-phone" placeholder="Phone Number" type="tel">
            </div>

            <div
                style="border-top: 1px solid #eee; padding-top: 15px; display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                <span style="font-weight: 600;">Total</span>
                <span style="font-size: 1.5rem; font-weight: 800; color: var(--primary);">₹<span
                        id="cart-final-total">0</span></span>
            </div>

            <button class="btn btn-primary" style="width: 100%;" onclick="placeOrder()">Place Order <i
                    class="fa-solid fa-arrow-right"></i></button>
        </div>
    </div>

    <!-- SCRIPTS -->
    <script type="module" src="firebase-config.js"></script>
    <script type="module" src="app.js?v=4"></script>
    <script>
        // Hero Slider
        let slideIdx = 0;
        const slides = document.querySelectorAll('.hero-bg');
        setInterval(() => {
            slides[slideIdx].style.opacity = '0';
            slideIdx = (slideIdx + 1) % slides.length;
            slides[slideIdx].style.opacity = '0.6';
        }, 5000);

        function scrollToMenu() { document.getElementById('menu-grid').scrollIntoView({ behavior: 'smooth' }); }
        window.closeModal = (id) => document.getElementById(id).classList.remove('open');
    </script>
</body>

</html>